# ===========================================
# ESKI TASHMI - ENVIRONMENT CONFIGURATION
# ===========================================
# Copy this file to .env and fill in the values
# NEVER commit .env to version control

# ===========================================
# APPLICATION
# ===========================================
NODE_ENV=development
PORT=3000
API_PREFIX=api/v1

# ===========================================
# DATABASE (PostgreSQL)
# ===========================================
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=eski_tashmi
DATABASE_USER=postgres
DATABASE_PASSWORD=password
DATABASE_SSL=false
DATABASE_SYNCHRONIZE=false
DATABASE_LOGGING=true

# ===========================================
# REDIS (for queues and caching)
# ===========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ===========================================
# TELEGRAM BOT
# ===========================================
# Get from @BotFather
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
# Comma-separated Telegram user IDs for admins
ADMIN_TELEGRAM_IDS=123456789,987654321
# Your Telegram WebApp URL (used for CORS and bot buttons)
WEBAPP_URL=https://your-webapp-domain.com

# ===========================================
# JWT / SESSION
# ===========================================
# Generate with: openssl rand -base64 64
JWT_SECRET=your_super_secret_jwt_key_min_32_chars_long
# Token expiry (e.g., 15m, 1h, 1d)
JWT_EXPIRY=1h

# ===========================================
# TELEGRAM WEBAPP AUTH
# ===========================================
# Maximum age of initData in seconds (recommended: 300 = 5 minutes)
TELEGRAM_INIT_DATA_MAX_AGE=300

# ===========================================
# DATA ENCRYPTION
# ===========================================
# 32-byte key for AES-256-GCM message encryption
# Generate with: openssl rand -hex 32
DATA_ENCRYPTION_KEY=0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef

# ===========================================
# FILE STORAGE (S3 / MinIO)
# ===========================================
STORAGE_TYPE=minio
S3_ENDPOINT=http://localhost:9000
S3_ACCESS_KEY=minioadmin
S3_SECRET_KEY=minioadmin
S3_BUCKET=eski-tashmi
S3_REGION=us-east-1
# For local MinIO, set to true
S3_FORCE_PATH_STYLE=true

# ===========================================
# FILE UPLOAD LIMITS
# ===========================================
# Max file size in bytes (10MB default)
MAX_FILE_SIZE=10485760
# Allowed MIME types (comma-separated)
ALLOWED_MIME_TYPES=image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm,audio/mpeg,audio/ogg

# ===========================================
# RATE LIMITING
# ===========================================
# HTTP API rate limits
THROTTLE_TTL=60
THROTTLE_LIMIT=100
# Stricter limits for auth endpoints
THROTTLE_AUTH_TTL=60
THROTTLE_AUTH_LIMIT=10

# ===========================================
# BROADCAST
# ===========================================
# Messages per second (Telegram limit is ~30/sec)
BROADCAST_RATE_LIMIT=25
# Batch size for processing
BROADCAST_BATCH_SIZE=100

# ===========================================
# SECURITY
# ===========================================
# CORS allowed origins (comma-separated)
CORS_ORIGINS=https://your-webapp-domain.com,https://web.telegram.org
# Trusted proxy IPs (for rate limiting)
TRUSTED_PROXIES=127.0.0.1
